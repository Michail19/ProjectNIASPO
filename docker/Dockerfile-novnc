FROM ubuntu:20.04

# Установка переменной окружения для предотвращения интерактивного режима
ENV DEBIAN_FRONTEND=noninteractive

# Настройка временной зоны
RUN apt update && apt install -y tzdata && \
    ln -fs /usr/share/zoneinfo/Europe/London /etc/localtime && \
    dpkg-reconfigure --frontend noninteractive tzdata

# Установка необходимых зависимостей для NoVNC и x11vnc
RUN apt update && apt install -y \
    git \
    x11vnc \
    python3-pip \
    && rm -rf /var/lib/apt/lists/*

# Клонируем репозиторий NoVNC
RUN git clone https://github.com/novnc/noVNC.git /noVNC && \
    chmod +x /noVNC/utils/novnc_proxy

# Устанавливаем зависимости Python для NoVNC
# Установка Python и pip
RUN apt update && apt install -y python3 python3-pip

# Установка numpy
RUN pip3 install numpy
RUN pip3 install websockify 

# Копируем скрипт для запуска x11vnc и NoVNC
COPY start-novnc.sh /start-novnc.sh
RUN chmod +x /start-novnc.sh

# Команда для запуска x11vnc и noVNC
CMD ["/start-novnc.sh"]
